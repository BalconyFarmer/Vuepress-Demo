(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{377:function(t,a,s){"use strict";s.r(a);var n=s(45),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前后端分离框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前后端分离框架"}},[t._v("#")]),t._v(" 前后端分离框架")]),t._v(" "),s("h2",{attrs:{id:"所需环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所需环境"}},[t._v("#")]),t._v(" 所需环境")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("前端:")]),t._v(" "),s("p",[s("strong",[s("em",[t._v("Node v10.13.0")])]),t._v(", "),s("strong",[s("em",[t._v("vue-cli3.0")])]),t._v(", "),s("strong",[s("em",[t._v("Vue 2.x")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("后端:")]),t._v(" "),s("p",[s("strong",[s("em",[t._v("JDK 1.8")])])])]),t._v(" "),s("h2",{attrs:{id:"前端部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端部分"}},[t._v("#")]),t._v(" 前端部分")]),t._v(" "),s("h3",{attrs:{id:"前端代码规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端代码规范"}},[t._v("#")]),t._v(" 前端代码规范")]),t._v(" "),s("h4",{attrs:{id:"css部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css部分"}},[t._v("#")]),t._v(" CSS部分")]),t._v(" "),s("ol",[s("li",[t._v("采用sass编写")]),t._v(" "),s("li",[t._v("类的名字全部 - 连接,不能用驼峰 比如head-bg,而不是headBg")]),t._v(" "),s("li",[t._v(".vue文件下面的style加上scope属性,约束样式生效的范围,防止css污染,如果要改UI库的样式,请到element-ui里面修改")]),t._v(" "),s("li",[t._v('避免使用标签选择器（效率低、损耗性能）,比如 div { color: "#fff" }')]),t._v(" "),s("li",[t._v("CSS 属性书写顺序：先决定定位宽高显示大小，再做局部细节修饰！推荐顺序：定位属性(或显示属性，display)->宽高属性->边距属性(margin, padding)->字体，背景，颜色等，修饰属性的定义")])]),t._v(" "),s("h4",{attrs:{id:"js部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js部分"}},[t._v("#")]),t._v(" js部分")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("所有的代码4个空格缩进,最外层使用双引号,语句末尾要加分号")])]),t._v(" "),s("li",[t._v("无特殊情况不允许使用原生API操作dom,谨慎使用this.$refs直接操作dom")]),t._v(" "),s("li",[t._v("使用ES6风格编码源码,定义变量使用let,定义常量使用const,使用export,import模块化")]),t._v(" "),s("li",[t._v("在/api/url.js下面统一定义api路径,模块太多的话新建不同模块的url.js")]),t._v(" "),s("li",[t._v("api/xxx.js,每一个模块新建一个js,用来存放http请求方法")])]),t._v(" "),s("h3",{attrs:{id:"代码目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码目录结构"}},[t._v("#")]),t._v(" 代码目录结构")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("├─ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*这个里面放不需要编译的静态文件,可以用过/根目录来访问到*/")]),t._v("\n└─ src\n   ├─ api \n   │    ├─ xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*每个页面对应一个js,请求接口的方法统一放到这里*/")]),t._v("\n   │    └─ url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*这里放后端接口的api路径*/")]),t._v("\n   ├─ assets "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*静态文件目录*/")]),t._v("\n   ├─ components "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*组件目录*/")]),t._v("\n   ├─ config\n   │    └─ index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*全局变量*/")]),t._v("\n   ├─ libs \n   ├─ plugin\n   ├─ router\n   ├─ store "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*Vuex仓库,每个模块对应一个js*/")]),t._v("\n   ├─ styles "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*样式文件*/")]),t._v("\n   │    ├─ base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*字体定义以及存放公共组件的样式*/")]),t._v("\n   │    ├─ element"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ui"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*重写element-ui样式*/")]),t._v("\n   │    ├─ index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*调用其他scss文件,css的入口文件*/")]),t._v("\n   │    ├─ mixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*scss混合器,里面定义常用的类,以及css使用频率很高的css片段*/")]),t._v("\n   │    ├─ reset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*重置浏览器默认样式*/")]),t._v("\n   │    ├─ transition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*过渡动画样式*/")]),t._v("\n   │    └─ variables"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scss "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*全局变量*/")]),t._v("\n   ├─ views "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*页面全部放到这里*/")]),t._v("\n   ├─ App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vue "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*项目入口文件*/")]),t._v("\n   ├─ main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js \n   ├─ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("development "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*开发环境的配置*/")]),t._v("\n   ├─ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("production "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*生产环境的配置*/")]),t._v("\n   ├─ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n   └─ vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])]),s("p",[s("code",[t._v("config/index.js")]),t._v("这个文件里面")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("baseURL"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_API")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**这里是axios请求的api基本路劲*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里的VUE_APP_API 开发的时候对应.env.development文件下面, ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包的时候 对应.env.production")]),t._v("\n")])])]),s("h4",{attrs:{id:"http请求的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http请求的方法"}},[t._v("#")]),t._v(" http请求的方法")]),t._v(" "),s("p",[t._v("首先我们先封装了"),s("strong",[t._v("axios")]),t._v("在"),s("code",[t._v("libs/axios")]),t._v(",跑出了post,get和导出三个方法,一般情况下我们使用的是get方法,下面看一个实例")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n1、首先引入url接口地址和封装好的axios。\n2、传参的格式{ params: {  } }。\n3、没有传pageNum和pageSize的方法返回的是对象,传了pageNum和pageSize的方法返回的是数组。\n4、如果在我们调用的时候没有传pageNum和pageSize,pageNum默认1,pageSize默认0, 这个时候返回所有数据。\n5、如果我们传了pageSize,就会返回第pageNum页的pageSize条数据，这时具备了分页功能。\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/libs/axios"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("xxx")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("params")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEnDe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" paramMap"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("xxx")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageNum "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEnDe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" paramMap"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageNum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pageSize "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"后端部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端部分"}},[t._v("#")]),t._v(" 后端部分")]),t._v(" "),s("p",[t._v("由于我们的业务只涉及到查的功能, 后端采用"),s("code",[t._v("SpringBoot")]),t._v("+"),s("code",[t._v("mybatis")]),t._v("的框架,把后端查的逻辑封装好,只需要把"),s("code",[t._v("sql")]),t._v("语句放入"),s("code",[t._v("mybatis")]),t._v("的"),s("code",[t._v("xml")]),t._v("文件中,就能生成一个后端接口,极大地提高了开发效率。")]),t._v(" "),s("h3",{attrs:{id:"后端代码目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端代码目录结构"}},[t._v("#")]),t._v(" 后端代码目录结构")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("└─ main\n   ├─ java /* springBoot的配置文件,已经封装好的查询逻辑和登录逻辑*/\n   ├─ resources /*静态文件目录*/\n   │    ├─ mapping\n   │    ├─ secret /*公钥和私钥*/\n   │    ├─ application.yml /*配置文件, 设置后端服务端口号*/\n   │    ├─ application-api.yml /*配置文件, 设置是否加密*/\n   │    ├─ application-druid.yml /*配置文件, 设置数据库配置文件*/\n   │    ├─ application-namespace.yml /*配置文件, 多数据库的映射关系*/\n   │    ├─ application-shiro.yml /*配置文件, 后端接口拦截*/\n   │    ├─ mapping\n   │    ├─ mapping\n   │    └─ secret /*公钥和私钥*/\n   pom.xml /*maven配置文件*/   \n")])])]),s("h3",{attrs:{id:"项目配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目配置"}},[t._v("#")]),t._v(" 项目配置")]),t._v(" "),s("h4",{attrs:{id:"application-yml-基础配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-yml-基础配置"}},[t._v("#")]),t._v(" "),s("code",[t._v("application.yml")]),t._v(" 基础配置")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("数据sql语句存放路径文件名称必须是Mapping.xml结尾")])]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mybatis.mapper-locations")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" classpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mapping/"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("*Mapping.xml")]),t._v("\n")])])]),s("h4",{attrs:{id:"application-api-yml-接口配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-api-yml-接口配置"}},[t._v("#")]),t._v(" "),s("code",[t._v("application-api.yml")]),t._v(" 接口配置")]),t._v(" "),s("p",[s("code",[t._v("api.encrypt")]),t._v(" 接口加密配置"),s("br"),t._v(" "),s("code",[t._v("api.decrypt")]),t._v(" 接口解密配置"),s("br"),t._v(" "),s("code",[t._v("api.rsaKey")]),t._v(" 服务器rsa密钥对存放路径"),s("br"),t._v(" "),s("code",[t._v("api.encrypt.enabled")]),t._v(" 是否开启接口返回数据加密 默认为true"),s("br"),t._v(" "),s("code",[t._v("api.encrypt. jwtAlgorithm")]),t._v(" 返回数据jwt签名算法 支持HS256 HS384 HS512 默认HS256"),s("br"),t._v(" "),s("code",[t._v("api.encrypt. jwtExpiration")]),t._v("  jwt签名过期时间，最小值为5，单位秒 默认5"),s("br"),t._v(" "),s("code",[t._v("api.encrypt. jwtSecret")]),t._v("  jwt签名密钥 客户端需使用该钥匙验证数据是否被篡改"),s("br"),t._v(" "),s("code",[t._v("api. decrypt. Enabled")]),t._v(" 是否开启接口响应解密 默认true"),s("br"),t._v(" "),s("code",[t._v("api. decrypt. jwtSecret")]),t._v("  jwt签名密钥 服务端需使用该钥匙验证参数是否被篡改")]),t._v(" "),s("h4",{attrs:{id:"application-druid-yml-数据库配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-druid-yml-数据库配置"}},[t._v("#")]),t._v(" "),s("code",[t._v("application-druid.yml")]),t._v(" 数据库配置")]),t._v(" "),s("p",[s("code",[t._v("spring. Datasource. Druid. statViewServlet. enabled")]),t._v("  是否开sql监控"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. statViewServlet.allow")]),t._v("  设置白名单，不填则允许所有访问"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. statViewServlet.deny")]),t._v("  设置黑名单"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. statViewServlet. url-pattern")]),t._v("  监控页面访问路径"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. statViewServlet. login-username")]),t._v("  登录用户名"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. statViewServlet. login-password")]),t._v("  登录密码"),s("br"),t._v(" "),s("code",[t._v("spring. Datasource. Druid. Source")]),t._v("  多数据源配置"),s("br"),t._v(" "),s("code",[t._v("id：")]),t._v("  数据源唯一编号"),s("br"),t._v(" "),s("code",[t._v("default：")]),t._v("  是否是默认数据源 默认数据源只能设置一个"),s("br"),t._v(" "),s("code",[t._v("url：")]),t._v("  数据库地址jdbc:"),s("code",[t._v("mysql:")]),t._v("// "),s("code",[t._v("ip")]),t._v(" "),s("code",[t._v("端口")]),t._v("/"),s("code",[t._v("库名")]),s("br"),t._v(" "),s("code",[t._v("username:")]),t._v("   数据库用户名"),s("br"),t._v(" "),s("code",[t._v("password：")]),t._v("  数据库密码"),s("br"),t._v(" "),s("code",[t._v("driverClassName：")]),t._v("  数据库驱动")]),t._v(" "),s("h4",{attrs:{id:"application-namespace-yml-数据源配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#application-namespace-yml-数据源配置"}},[t._v("#")]),t._v(" "),s("code",[t._v("application-namespace.yml")]),t._v("  数据源配置")]),t._v(" "),s("p",[t._v("namespace.point."),s("code",[t._v("数据源编号")]),t._v(" 需要与druid中的数据源id对应"),s("br"),t._v(" "),s("code",[t._v("-")]),t._v(" "),s("code",[t._v("命名空间名称")]),t._v(" sql语句的namespace"),s("br")]),t._v(" "),s("p",[t._v("例如 数据库配置文件是这样的")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//xx.x.x.x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xxxx/xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driverClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.cj.jdbc.Driver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" jdbc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//xx.x.x.x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xxxx/xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driverClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" com.mysql.cj.jdbc.Driver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("那在数据源配置里面,module1和module2的mapping.xml文件对应master库,module3和module4的mapping文件对应sub这个库")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("point")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("master")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" module1\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" module2\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sub")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" module3\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" module4\n\n")])])]),s("h4",{attrs:{id:"mapping文件详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapping文件详解"}},[t._v("#")]),t._v(" mapping文件详解")]),t._v(" "),s("ul",[s("li",[t._v("配置文件里面的namespace的值就对应"),s("strong",[t._v("application-namespace.yml")]),t._v("里面的 - module1")]),t._v(" "),s("li",[t._v("我们开发的时候每个页面对应一个"),s("strong",[t._v("mapping.xml")]),t._v("文件,而这个module1里面的所有sql就就查的是master这个库里面的数据")]),t._v(" "),s("li",[t._v("每一个"),s("strong",[t._v("select")]),t._v("对应一个接口")]),t._v(" "),s("li",[s("strong",[t._v('resultType="Map"')]),t._v(" 就是返回一个对象,"),s("strong",[t._v("这个必须加上,不加上会报错")])]),t._v(" "),s("li",[t._v("#{username}就是前端传过来的参数")]),t._v(" "),s("li",[t._v("mybatis里面主要用到"),s("strong",[t._v(" if ")]),t._v("和"),s("strong",[t._v(" choose>when ")]),t._v("的语法")])]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8" ?>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("mapper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("PUBLIC")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-//mybatis.org//DTD Mapper 3.0//EN"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://mybatis.org/dtd/mybatis-3-mapper.dtd"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("mapper")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("module1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("api1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultType")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       select po_name, org_code from table1 where po_name = #{username}\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("mapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);